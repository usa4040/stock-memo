# プロジェクトルール: Stock Memo

## 1. アーキテクチャ: DDD（ドメイン駆動設計）

このプロジェクトはDDDに基づいた以下のレイヤー構成を採用しています：

```
domain/          ← ドメイン層（ビジネスロジック、エンティティ、値オブジェクト）
application/     ← アプリケーション層（ユースケース、サービス）
infrastructure/  ← インフラ層（リポジトリ実装、外部API）
app/             ← プレゼンテーション層（Next.js App Router）
```

### ルール
- **依存関係は内側に向かう**: `app → application → domain ← infrastructure`
- ドメイン層は外部に依存しない（Prisma等は使わない）
- リポジトリはドメイン層でインターフェースを定義し、インフラ層で実装

## 2. 開発プロセス: TDD（テスト駆動開発）

新機能や修正は以下のサイクルで実装：

1. **Red**: 失敗するテストを先に書く
2. **Green**: テストを通す最小限のコードを書く
3. **Refactor**: コードを整理する

### テスト種別
| 種別 | ディレクトリ | コマンド |
|------|-------------|----------|
| ユニットテスト | `__tests__/` | `npm test` |
| 統合テスト | `__tests__/integration/` | `npm run test:integration` |

### ルール
- 新しい機能を追加する前にテストケースを作成
- テストなしのPRは原則マージしない
- カバレッジ目標: 80%以上

## 3. コード変更時の注意事項

- コードを変更する前に、必ず影響範囲を分析する
- 修正内容については、なぜその修正が必要なのかを論理的に説明する
